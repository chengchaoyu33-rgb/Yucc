# WMS-Lite 功能模块详细设计文档

## 一、模块总览

### 1.1 功能模块划分

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          WMS-Lite 功能模块                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         系统管理模块                                  │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐           │   │
│  │  │ 用户管理   │ │ 角色管理   │ │ 权限管理   │ │ 系统配置   │           │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         基础数据模块                                  │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐           │   │
│  │  │ 商品管理   │ │ 分类管理   │ │ 仓库管理   │ │ 库位管理   │           │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘           │   │
│  │  ┌───────────┐ ┌───────────┐                                        │   │
│  │  │ 供应商管理 │ │ 客户管理   │                                        │   │
│  │  └───────────┘ └───────────┘                                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         业务操作模块                                  │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐           │   │
│  │  │ 入库管理   │ │ 出库管理   │ │ 库存管理   │ │ 库内作业   │           │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         报表分析模块                                  │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐           │   │
│  │  │ 库存报表   │ │ 出入库报表 │ │ 周转分析   │ │ 首页看板   │           │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         辅助功能模块                                  │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐           │   │
│  │  │ 条码管理   │ │ 标签打印   │ │ 数据导入   │ │ 数据导出   │           │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 二、系统管理模块

### 2.1 用户管理

#### 2.1.1 功能描述

管理系统用户，包括用户的增删改查、密码重置、状态管理等功能。

#### 2.1.2 功能清单

| 功能 | 说明 | 权限 |
|------|------|------|
| 用户列表 | 分页查询用户列表 | user:view |
| 用户详情 | 查看用户详细信息 | user:view |
| 新增用户 | 创建新用户账号 | user:create |
| 编辑用户 | 修改用户信息 | user:update |
| 删除用户 | 删除用户账号 | user:delete |
| 重置密码 | 重置用户密码 | user:update |
| 启用/禁用 | 切换用户状态 | user:update |

#### 2.1.3 页面设计

**用户列表页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  用户管理                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 用户名 [          ] 角色 [全部 ▼] 状态 [全部 ▼]  [搜索] [重置] [新增] │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ □ │ 用户名 │ 昵称   │ 角色     │ 手机号      │ 状态 │ 创建时间  │ 操作 │   │
│  ├───┼────────┼────────┼──────────┼─────────────┼──────┼───────────┼──────┤   │
│  │ □ │ admin  │ 管理员 │ 系统管理员│ 138****8000 │ 启用 │ 2024-01-01│ 编辑 │   │
│  │   │        │        │          │             │      │           │ 删除 │   │
│  │   │        │        │          │             │      │           │ 重置 │   │
│  ├───┼────────┼────────┼──────────┼─────────────┼──────┼───────────┼──────┤   │
│  │ □ │ oper01 │ 操作员1│ 操作员   │ 138****8001 │ 启用 │ 2024-01-02│ ...  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  共 10 条记录  每页 20 条  < 1 2 3 ... >                                    │
└─────────────────────────────────────────────────────────────────────────────┘
```

**用户表单页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  新增用户                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  用户名 *     [                    ]                                         │
│                                                                             │
│  密码 *       [                    ]                                         │
│                                                                             │
│  确认密码 *   [                    ]                                         │
│                                                                             │
│  昵称         [                    ]                                         │
│                                                                             │
│  邮箱         [                    ]                                         │
│                                                                             │
│  手机号       [                    ]                                         │
│                                                                             │
│  角色 *       [请选择角色      ▼ ]                                         │
│                                                                             │
│  状态         ○ 启用  ○ 禁用                                              │
│                                                                             │
│                                            [取消]  [确定]                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 2.1.4 业务规则

1. 用户名唯一，长度 4-20 个字符
2. 密码长度至少 8 位，需包含字母和数字
3. 删除用户时检查是否有关联数据
4. 管理员账号不能被删除或禁用
5. 用户被禁用后立即无法登录

### 2.2 角色管理

#### 2.2.1 功能描述

管理系统角色，包括角色的增删改查、权限分配等功能。

#### 2.2.2 功能清单

| 功能 | 说明 | 权限 |
|------|------|------|
| 角色列表 | 查询角色列表 | role:view |
| 新增角色 | 创建新角色 | role:create |
| 编辑角色 | 修改角色信息 | role:update |
| 删除角色 | 删除角色 | role:delete |
| 分配权限 | 为角色分配权限 | role:permission |

#### 2.2.3 预置角色

| 角色编码 | 角色名称 | 权限范围 |
|----------|----------|----------|
| admin | 系统管理员 | 全部权限 |
| operator | 操作员 | 入库、出库、库存查询、盘点 |
| viewer | 查看者 | 只读权限 |

#### 2.2.4 权限分配页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  分配权限 - 操作员                                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ☑ 基础数据                                                                 │
│    ├─ ☑ 商品管理                                                            │
│    │    ├─ ☑ 查看  ☑ 新增  ☑ 编辑  □ 删除                                   │
│    │    └─ ☑ 导入  ☑ 导出                                                   │
│    ├─ ☑ 仓库管理                                                            │
│    │    └─ ☑ 查看  □ 新增  □ 编辑  □ 删除                                   │
│    └─ ☑ 库位管理                                                            │
│         └─ ☑ 查看  □ 新增  □ 编辑  □ 删除                                   │
│                                                                             │
│  ☑ 入库管理                                                                 │
│    ├─ ☑ 入库单                                                              │
│    │    └─ ☑ 查看  ☑ 新增  ☑ 编辑  ☑ 审核  ☑ 入库                          │
│    └─ ☑ 入库记录                                                            │
│         └─ ☑ 查看                                                           │
│                                                                             │
│  ☑ 出库管理                                                                 │
│    └─ ...                                                                   │
│                                                                             │
│  ☑ 库存管理                                                                 │
│    └─ ...                                                                   │
│                                                                             │
│  □ 系统管理                                                                 │
│    └─ ...                                                                   │
│                                                                             │
│                                            [取消]  [确定]                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 三、基础数据模块

### 3.1 商品管理

#### 3.1.1 功能描述

管理仓库中的商品信息，包括商品的基本信息、规格、价格、库存预警等。

#### 3.1.2 功能清单

| 功能 | 说明 | 权限 |
|------|------|------|
| 商品列表 | 分页查询商品列表 | product:view |
| 商品详情 | 查看商品详细信息 | product:view |
| 新增商品 | 创建新商品 | product:create |
| 编辑商品 | 修改商品信息 | product:update |
| 删除商品 | 删除商品 | product:delete |
| 批量删除 | 批量删除商品 | product:delete |
| 导入商品 | Excel 批量导入 | product:import |
| 导出商品 | Excel 导出商品 | product:export |
| 生成条码 | 为商品生成条码 | product:create |

#### 3.1.3 页面设计

**商品列表页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  商品管理                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 关键词 [          ] 分类 [全部 ▼] 状态 [全部 ▼]  [搜索] [重置] [新增] │   │
│  │ [导入] [导出] [批量删除]                                              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ □ │ 商品编码 │ 条码 │ 商品名称 │ 分类 │ 规格 │ 单位 │ 库存 │ 状态 │ 操作│   │
│  ├───┼──────────┼──────┼──────────┼──────┼──────┼──────┼──────┼──────┼─────┤   │
│  │ □ │ P001     │ 690..│ 苹果     │ 水果 │ 500g │ 个   │ 100  │ 正常 │ 详情│   │
│  │   │          │      │          │      │      │      │      │      │ 编辑│   │
│  │   │          │      │          │      │      │      │      │      │ 删除│   │
│  ├───┼──────────┼──────┼──────────┼──────┼──────┼──────┼──────┼──────┼─────┤   │
│  │ □ │ P002     │ 691..│ 香蕉     │ 水果 │ 1kg  │ 个   │ 50   │ 正常 │ ... │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  共 100 条记录  每页 20 条  < 1 2 3 ... >                                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

**商品表单页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  新增商品                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 基本信息 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  商品编码 *   [                    ]  [自动生成]                    │    │
│  │                                                                     │    │
│  │  商品条码     [                    ]  [生成条码]                    │    │
│  │                                                                     │    │
│  │  商品名称 *   [                                         ]           │    │
│  │                                                                     │    │
│  │  商品分类 *   [请选择分类      ▼ ]                                  │    │
│  │                                                                     │    │
│  │  商品规格     [                    ]                               │    │
│  │                                                                     │    │
│  │  计量单位 *   [                    ]                               │    │
│  │                                                                     │    │
│  │  商品品牌     [                    ]                               │    │
│  │                                                                     │    │
│  │  产地         [                    ]                               │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 价格信息 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  销售价格     [          ] 元                                       │    │
│  │                                                                     │    │
│  │  成本价格     [          ] 元                                       │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 库存设置 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  最低库存     [          ]  低于此数量将预警                        │    │
│  │                                                                     │    │
│  │  最高库存     [          ]  高于此数量将预警                        │    │
│  │                                                                     │    │
│  │  保质期(天)   [          ]  用于效期预警                            │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 其他信息 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  商品图片     [点击上传]                                            │    │
│  │                                                                     │    │
│  │  商品描述     [                                         ]           │    │
│  │                                                                     │    │
│  │  状态         ○ 启用  ○ 禁用                                       │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                                            [取消]  [确定]                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 3.1.4 业务规则

1. 商品编码唯一，支持自动生成
2. 商品条码可选，如填写需唯一
3. 删除商品时检查是否有库存
4. 商品禁用后不能在出入库单中选择
5. 最低库存、最高库存用于库存预警

### 3.2 仓库管理

#### 3.2.1 功能描述

管理仓库信息，支持多仓库管理。

#### 3.2.2 功能清单

| 功能 | 说明 |
|------|------|
| 仓库列表 | 查询仓库列表 |
| 新增仓库 | 创建新仓库 |
| 编辑仓库 | 修改仓库信息 |
| 删除仓库 | 删除仓库 |
| 查看库区 | 查看仓库下的库区 |

#### 3.2.3 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  仓库管理                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  [+ 新增仓库]                                                               │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ ┌───────────────────────────────────────────────────────────────┐   │   │
│  │ │ 主仓库 (W001)                                    [编辑] [删除]│   │   │
│  │ ├───────────────────────────────────────────────────────────────┤   │   │
│  │ │ 地址: 北京市朝阳区xxx路xxx号                                   │   │   │
│  │ │ 联系人: 张三  电话: 13800138000                                │   │   │
│  │ │ 面积: 1000㎡  状态: 启用                                       │   │   │
│  │ │ 库区数量: 5  库位数量: 200  商品种类: 500                       │   │   │
│  │ │                                                               │   │   │
│  │ │ [查看库区] [查看库位]                                          │   │   │
│  │ └───────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │ ┌───────────────────────────────────────────────────────────────┐   │   │
│  │ │ 分仓库 (W002)                                    [编辑] [删除]│   │   │
│  │ ├───────────────────────────────────────────────────────────────┤   │   │
│  │ │ ...                                                            │   │   │
│  │ └───────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 库位管理

#### 3.3.1 功能描述

管理仓库的库区、库位信息，支持树形结构展示。

#### 3.3.2 库位编码规则

```
库位编码格式: [库区代码]-[排]-[列]-[层]

示例: A-01-02-03
  - A: A库区
  - 01: 第1排
  - 02: 第2列
  - 03: 第3层
```

#### 3.3.3 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  库位管理                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  仓库: [主仓库    ▼ ]   [+ 新增库区]  [+ 批量新增库位]                       │
│                                                                             │
│  ┌───────────────────┬────────────────────────────────────────────────────┐ │
│  │                   │                                                    │ │
│  │  ▼ 主仓库         │  库区信息                                          │ │
│  │    ▼ A库区        │  ┌──────────────────────────────────────────────┐ │ │
│  │      A-01-01      │  │ 库区编码: A                                    │ │ │
│  │      A-01-02      │  │ 库区名称: A库区                                │ │ │
│  │      A-01-03      │  │ 库区类型: 存储区                               │ │ │
│  │      A-02-01      │  │ 库位数量: 100                                  │ │ │
│  │      ...          │  │ 空闲库位: 30                                   │ │ │
│  │    ▶ B库区        │  │ 占用库位: 70                                   │ │ │
│  │    ▶ C库区        │  └──────────────────────────────────────────────┘ │ │
│  │                   │                                                    │ │
│  │                   │  库位列表                                          │ │
│  │                   │  ┌──────────────────────────────────────────────┐ │ │
│  │                   │  │ 库位编码 │ 类型 │ 状态 │ 存放商品 │ 操作     │ │ │
│  │                   │  ├──────────┼──────┼──────┼──────────┼──────────┤ │ │
│  │                   │  │ A-01-01  │ 货架 │ 占用 │ 苹果(50) │ [详情]   │ │ │
│  │                   │  │ A-01-02  │ 货架 │ 空闲 │ -        │ [编辑]   │ │ │
│  │                   │  │ A-01-03  │ 货架 │ 空闲 │ -        │ [禁用]   │ │ │
│  │                   │  └──────────────────────────────────────────────┘ │ │
│  │                   │                                                    │ │
│  └───────────────────┴────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 四、入库管理模块

### 4.1 入库单管理

#### 4.1.1 功能描述

管理入库业务，支持采购入库、退货入库、调拨入库等多种入库类型。

#### 4.1.2 入库类型

| 类型 | 编码 | 说明 |
|------|------|------|
| 采购入库 | purchase | 从供应商采购商品入库 |
| 退货入库 | return | 客户退货入库 |
| 调拨入库 | transfer | 仓库间调拨入库 |
| 盘盈入库 | inventory_gain | 盘点盘盈入库 |
| 其他入库 | other | 其他类型入库 |

#### 4.1.3 入库流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              入库业务流程                                    │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐
  │ 创建单据 │───▶│ 提交审核 │───▶│ 审核通过 │───▶│ 入库上架 │───▶│ 入库完成 │
  └────────┘    └────────┘    └────────┘    └────────┘    └────────┘
      │             │              │              │              │
      ▼             ▼              ▼              ▼              ▼
   ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐
   │ 草稿  │     │ 待审核│     │ 已审核│     │ 入库中│     │ 已完成│
   │ 状态0 │     │ 状态1 │     │ 状态2 │     │       │     │ 状态3 │
   └──────┘     └──────┘     └──────┘     └──────┘     └──────┘
                    │
                    ▼
               ┌──────┐
               │审核拒绝│
               │(退回) │
               └──────┘
                    │
                    ▼
               ┌──────┐
               │ 取消  │
               │ 状态4 │
               └──────┘
```

#### 4.1.4 页面设计

**入库单列表页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  入库管理 > 入库单                                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 单号 [          ] 类型 [全部 ▼] 状态 [全部 ▼] 供应商 [全部 ▼]        │   │
│  │ 日期 [开始日期] - [结束日期]  [搜索] [重置] [新增入库单]              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 单号       │ 类型   │ 供应商   │ 数量 │ 金额    │ 状态 │ 创建时间 │ 操作│   │
│  ├────────────┼────────┼──────────┼──────┼─────────┼──────┼──────────┼─────┤   │
│  │ RK240101001│ 采购入库│ 供应商A │ 100  │ 5000.00 │ 草稿 │ 2024-01-01│ 详情│   │
│  │            │        │          │      │         │      │          │ 编辑│   │
│  │            │        │          │      │         │      │          │ 提交│   │
│  │            │        │          │      │         │      │          │ 删除│   │
│  ├────────────┼────────┼──────────┼──────┼─────────┼──────┼──────────┼─────┤   │
│  │ RK240101002│ 采购入库│ 供应商B │ 200  │ 8000.00 │待审核│ 2024-01-01│ 详情│   │
│  │            │        │          │      │         │      │          │ 审核│   │
│  ├────────────┼────────┼──────────┼──────┼─────────┼──────┼──────────┼─────┤   │
│  │ RK240101003│ 采购入库│ 供应商A │ 150  │ 7500.00 │ 已审核│ 2024-01-01│ 详情│   │
│  │            │        │          │      │         │      │          │ 入库│   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  共 50 条记录  每页 20 条  < 1 2 3 ... >                                    │
└─────────────────────────────────────────────────────────────────────────────┘
```

**入库单详情页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  入库单详情                                                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 基本信息 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  入库单号: RK240101001          入库类型: 采购入库                  │    │
│  │  供应商:   供应商A              仓库:     主仓库                    │    │
│  │  预计日期: 2024-01-05          实际日期: -                          │    │
│  │  状态:     草稿                创建人:   张三                      │    │
│  │  创建时间: 2024-01-01 10:00:00                                      │    │
│  │  备注:     月度采购                                                │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 入库明细 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌───────────────────────────────────────────────────────────────┐ │    │
│  │  │ 商品编码 │ 商品名称 │ 规格 │ 预期数量 │ 实际数量 │ 库位 │ 操作│ │    │
│  │  ├──────────┼──────────┼──────┼──────────┼──────────┼──────┼─────┤ │    │
│  │  │ P001     │ 苹果     │ 500g │ 50       │ 0        │ -    │ 删除│ │    │
│  │  │ P002     │ 香蕉     │ 1kg  │ 50       │ 0        │ -    │ 删除│ │    │
│  │  └───────────────────────────────────────────────────────────────┘ │    │
│  │                                                                     │    │
│  │  [+ 添加商品]                                                       │    │
│  │                                                                     │    │
│  │  合计数量: 100    合计金额: 5000.00 元                              │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 操作记录 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  2024-01-01 10:00:00  张三  创建入库单                             │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                          [返回]  [保存]  [提交审核]  [删除]                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

**入库确认页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  入库确认                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  入库单号: RK240101001          状态: 已审核                                │
│                                                                             │
│  ┌─ 入库明细 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌───────────────────────────────────────────────────────────────┐ │    │
│  │  │ 商品 │ 预期 │ 实际 │ 库位   │ 批次号   │ 生产日期 │ 过期日期 │ │    │
│  │  ├──────┼──────┼──────┼────────┼──────────┼──────────┼──────────┤ │    │
│  │  │ 苹果 │ 50   │ [50] │ [选择] │ [B240101]│ [2024-01]│ [2025-01]│ │    │
│  │  │ 香蕉 │ 50   │ [48] │ [选择] │ [B240101]│ [2024-01]│ [2025-01]│ │    │
│  │  └───────────────────────────────────────────────────────────────┘ │    │
│  │                                                                     │    │
│  │  说明: 实际数量可修改，与预期数量不同将记录差异                     │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                          [返回]  [确认入库]                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 4.1.5 业务规则

1. 草稿状态可编辑、删除
2. 提交审核后不可编辑
3. 审核通过后才能入库
4. 入库时需要指定库位、批次号
5. 入库完成后自动更新库存
6. 入库数量可以与预期数量不同

---

## 五、出库管理模块

### 5.1 出库单管理

#### 5.1.1 功能描述

管理出库业务，支持销售出库、领料出库、调拨出库等多种出库类型。

#### 5.1.2 出库类型

| 类型 | 编码 | 说明 |
|------|------|------|
| 销售出库 | sale | 销售商品出库 |
| 领料出库 | picking | 生产领料出库 |
| 退料出库 | return | 生产退料出库 |
| 调拨出库 | transfer | 仓库间调拨出库 |
| 盘亏出库 | inventory_loss | 盘点盘亏出库 |
| 其他出库 | other | 其他类型出库 |

#### 5.1.3 出库流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              出库业务流程                                    │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐
  │ 创建单据 │───▶│ 提交审核 │───▶│ 审核通过 │───▶│ 拣货下架 │───▶│ 出库完成 │
  └────────┘    └────────┘    └────────┘    └────────┘    └────────┘
      │             │              │              │              │
      ▼             ▼              ▼              ▼              ▼
   ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐
   │ 草稿  │     │ 待审核│     │ 已审核│     │ 出库中│     │ 已完成│
   │ 状态0 │     │ 状态1 │     │ 状态2 │     │       │     │ 状态3 │
   └──────┘     └──────┘     └──────┘     └──────┘     └──────┘
```

#### 5.1.4 拣货策略

```
┌─────────────────────────────────────────────────────────────────┐
│                        拣货策略                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 先进先出 (FIFO)                                             │
│     优先出库入库时间较早的批次                                   │
│     适用: 无特殊保质期要求的商品                                 │
│                                                                 │
│  2. 效期优先 (FEFO)                                             │
│     优先出库过期时间较近的批次                                   │
│     适用: 有保质期要求的商品（食品、药品等）                     │
│                                                                 │
│  3. 批次指定                                                    │
│     由用户手动指定出库批次                                       │
│     适用: 特殊情况                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 5.1.5 页面设计

**出库单列表页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  出库管理 > 出库单                                                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 单号 [          ] 类型 [全部 ▼] 状态 [全部 ▼] 客户 [全部 ▼]         │   │
│  │ 日期 [开始日期] - [结束日期]  [搜索] [重置] [新增出库单]              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 单号       │ 类型   │ 客户    │ 数量 │ 金额    │ 状态 │ 创建时间 │ 操作│   │
│  ├────────────┼────────┼─────────┼──────┼─────────┼──────┼──────────┼─────┤   │
│  │ CK240101001│ 销售出库│ 客户A  │ 30   │ 1500.00 │ 草稿 │ 2024-01-01│ 详情│   │
│  │            │        │         │      │         │      │          │ 编辑│   │
│  │            │        │         │      │         │      │          │ 提交│   │
│  │            │        │         │      │         │      │          │ 删除│   │
│  ├────────────┼────────┼─────────┼──────┼─────────┼──────┼──────────┼─────┤   │
│  │ CK240101002│ 销售出库│ 客户B  │ 50   │ 2500.00 │已审核│ 2024-01-01│ 详情│   │
│  │            │        │         │      │         │      │          │ 出库│   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

**出库确认页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  出库确认                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  出库单号: CK240101001          状态: 已审核                                │
│                                                                             │
│  ┌─ 出库明细 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌───────────────────────────────────────────────────────────────┐ │    │
│  │  │ 商品 │ 预期 │ 实际 │ 库位   │ 批次号   │ 可用库存 │ 操作    │ │    │
│  │  ├──────┼──────┼──────┼────────┼──────────┼──────────┼─────────┤ │    │
│  │  │ 苹果 │ 30   │ [30] │ [选择] │ [选择]   │ 100      │ [推荐]  │ │    │
│  │  └───────────────────────────────────────────────────────────────┘ │    │
│  │                                                                     │    │
│  │  说明: 点击[推荐]系统自动分配库位和批次                             │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                          [返回]  [确认出库]                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 5.1.6 业务规则

1. 出库前检查库存是否充足
2. 出库时自动扣减库存
3. 支持部分出库
4. 出库数量不能超过预期数量
5. 出库后生成库存流水记录

---

## 六、库存管理模块

### 6.1 实时库存

#### 6.1.1 功能描述

实时查看仓库库存情况，支持多维度查询。

#### 6.1.2 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  库存管理 > 实时库存                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 关键词 [          ] 仓库 [全部 ▼] 分类 [全部 ▼]                      │   │
│  │ 库存状态 [全部 ▼]  [搜索] [重置] [导出]                              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 商品编码 │ 商品名称 │ 规格 │ 库位   │ 批次 │ 可用 │ 冻结 │ 状态│ 操作│   │
│  ├──────────┼──────────┼──────┼────────┼──────┼──────┼──────┼─────┼─────┤   │
│  │ P001     │ 苹果     │ 500g │ A-01-01│ B001 │ 50   │ 0    │ 正常│ 详情│   │
│  │          │          │      │ A-01-02│ B002 │ 30   │ 10   │ 正常│ 冻结│   │
│  │          │          │      │ 合计   │ -    │ 80   │ 10   │     │ 流水│   │
│  ├──────────┼──────────┼──────┼────────┼──────┼──────┼──────┼─────┼─────┤   │
│  │ P002     │ 香蕉     │ 1kg  │ A-02-01│ B003 │ 20   │ 0    │ 预警│ 详情│   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 库存预警

#### 6.2.1 功能描述

监控库存状态，及时发现低库存、高库存、临期商品。

#### 6.2.2 预警类型

| 类型 | 编码 | 触发条件 |
|------|------|----------|
| 低库存预警 | low | 可用库存 < 最低库存 |
| 高库存预警 | high | 可用库存 > 最高库存 |
| 效期预警 | expire | 距过期天数 < 预警天数 |

#### 6.2.3 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  库存管理 > 库存预警                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 预警类型 [全部 ▼] 处理状态 [全部 ▼]  [搜索] [重置]                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 预警统计 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐                            │    │
│  │  │ 低库存   │  │ 高库存   │  │ 临期    │                            │    │
│  │  │   5     │  │   3     │  │   2     │                            │    │
│  │  │  条     │  │  条     │  │  条     │                            │    │
│  │  └─────────┘  └─────────┘  └─────────┘                            │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 商品编码 │ 商品名称 │ 预警类型 │ 阈值 │ 当前值 │ 状态 │ 操作       │   │
│  ├──────────┼──────────┼──────────┼──────┼────────┼──────┼────────────┤   │
│  │ P002     │ 香蕉     │ 低库存   │ 30   │ 20     │ 未处理│ [处理]    │   │
│  │ P003     │ 橙子     │ 临期     │ 30天 │ 15天   │ 未处理│ [处理]    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.3 库存盘点

#### 6.3.1 功能描述

定期或不定期对仓库库存进行盘点，发现并处理库存差异。

#### 6.3.2 盘点流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              盘点业务流程                                    │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐
  │ 创建任务 │───▶│ 开始盘点 │───▶│ 盘点录入 │───▶│ 差异处理 │───▶│ 盘点完成 │
  └────────┘    └────────┘    └────────┘    └────────┘    └────────┘
      │             │              │              │              │
      ▼             ▼              ▼              ▼              ▼
   ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐
   │ 草稿  │     │ 进行中│     │ 盘点中│     │ 处理中│     │ 已完成│
   │ 状态0 │     │ 状态1 │     │       │     │       │     │ 状态2 │
   └──────┘     └──────┘     └──────┘     └──────┘     └──────┘
```

#### 6.3.3 页面设计

**盘点任务列表**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  库内作业 > 库存盘点                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  [+ 新建盘点任务]                                                           │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 任务编号  │ 盘点类型 │ 仓库   │ 商品数 │ 差异数 │ 状态 │ 创建时间 │ 操作│   │
│  ├───────────┼──────────┼────────┼────────┼────────┼──────┼──────────┼─────┤   │
│  │ PD240101  │ 部分盘点 │ 主仓库 │ 50     │ 2      │ 已完成│ 2024-01-01│ 详情│   │
│  │ PD240102  │ 全盘    │ 主仓库 │ 500    │ -      │ 进行中│ 2024-01-02│ 盘点│   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

**盘点录入页面**:

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  盘点录入                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  任务编号: PD240102          状态: 进行中                                   │
│                                                                             │
│  ┌─ 盘点明细 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌───────────────────────────────────────────────────────────────┐ │    │
│  │  │ 商品编码 │ 商品名称 │ 库位   │ 批次 │ 系统数量 │ 实盘数量 │ 差异│ │    │
│  │  ├──────────┼──────────┼────────┼──────┼──────────┼──────────┼─────┤ │    │
│  │  │ P001     │ 苹果     │ A-01-01│ B001 │ 50       │ [    ]   │ -   │ │    │
│  │  │ P002     │ 香蕉     │ A-02-01│ B003 │ 20       │ [    ]   │ -   │ │    │
│  │  │ P003     │ 橙子     │ A-03-01│ B005 │ 30       │ [    ]   │ -   │ │    │
│  │  └───────────────────────────────────────────────────────────────┘ │    │
│  │                                                                     │    │
│  │  说明: 输入实盘数量后自动计算差异                                   │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                          [返回]  [保存]  [完成盘点]                          │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 七、报表分析模块

### 7.1 首页看板

#### 7.1.1 功能描述

展示仓库运营关键指标，帮助管理者快速了解仓库状态。

#### 7.1.2 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  首页看板                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 库存概览 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐              │    │
│  │  │ 商品种类 │  │ 库存总量 │  │ 低库存   │  │ 临期商品 │              │    │
│  │  │  500    │  │ 10000   │  │   5     │  │   3     │              │    │
│  │  │  种     │  │  件     │  │  种     │  │  种     │              │    │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘              │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 今日作业 ───────────────────────┐  ┌─ 待处理事项 ─────────────────┐    │
│  │                                  │  │                              │    │
│  │  入库单: 10 单 / 500 件          │  │  待审核入库单: 5 单          │    │
│  │  出库单: 15 单 / 300 件          │  │  待审核出库单: 8 单          │    │
│  │                                  │  │  进行中盘点: 2 单            │    │
│  │                                  │  │  未处理预警: 10 条           │    │
│  │                                  │  │                              │    │
│  └──────────────────────────────────┘  └──────────────────────────────┘    │
│                                                                             │
│  ┌─ 出入库趋势 (近7天) ──────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  [图表区域 - 折线图]                                               │    │
│  │                                                                     │    │
│  │     数量                                                           │    │
│  │      │    ┌──入库                                                  │    │
│  │      │  ┌─┘  └──出库                                              │    │
│  │      │ ┌┘   ┌┘                                                    │    │
│  │      │┌┘   ┌┘                                                     │    │
│  │      └────────────────────── 日期                                 │    │
│  │        01  02  03  04  05  06  07                                 │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 热销商品 TOP10 ──────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  [图表区域 - 柱状图]                                               │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 7.2 库存报表

#### 7.2.1 功能描述

提供库存汇总、库存明细、库存周转等报表。

#### 7.2.2 报表类型

| 报表 | 说明 |
|------|------|
| 库存汇总表 | 按分类/仓库汇总库存 |
| 库存明细表 | 详细库存清单 |
| 库存周转分析 | 商品周转率分析 |
| 效期分析表 | 临期/过期商品分析 |

---

## 八、辅助功能模块

### 8.1 条码管理

#### 8.1.1 功能描述

为商品生成、打印条码标签。

#### 8.1.2 条码类型

| 类型 | 格式 | 用途 |
|------|------|------|
| EAN-13 | 13位数字 | 商品条码 |
| Code128 | 可变长度 | 内部编码 |
| QR Code | 二维码 | 信息存储 |

#### 8.1.3 页面设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  条码管理                                                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 条码生成 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  商品编码: [P001        ]  商品名称: 苹果                          │    │
│  │                                                                     │    │
│  │  条码类型: ○ EAN-13  ● Code128  ○ QR Code                         │    │
│  │                                                                     │    │
│  │  条码内容: [6901234567890 ]  [生成条码]                            │    │
│  │                                                                     │    │
│  │  ┌─────────────────┐                                               │    │
│  │  │                 │                                               │    │
│  │  │  |||||||||||||  │                                               │    │
│  │  │  6901234567890  │                                               │    │
│  │  │                 │                                               │    │
│  │  └─────────────────┘                                               │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─ 标签打印 ─────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │  打印数量: [10   ]                                                 │    │
│  │                                                                     │    │
│  │  标签模板: [标准标签  ▼ ]                                          │    │
│  │                                                                     │    │
│  │  ┌─────────────────┐                                               │    │
│  │  │ 苹果            │                                               │    │
│  │  │ P001 / 500g     │                                               │    │
│  │  │ |||||||||||||   │                                               │    │
│  │  │ 6901234567890   │                                               │    │
│  │  └─────────────────┘                                               │    │
│  │                                                                     │    │
│  │  [预览]  [打印]                                                    │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 8.2 数据导入导出

#### 8.2.1 功能描述

支持商品、客户、供应商等数据的批量导入导出。

#### 8.2.2 导入模板

**商品导入模板**:

| 列名 | 必填 | 说明 |
|------|------|------|
| 商品编码 | 是 | 唯一 |
| 商品条码 | 否 | 唯一 |
| 商品名称 | 是 | - |
| 分类编码 | 否 | 需已存在 |
| 规格 | 否 | - |
| 单位 | 否 | - |
| 品牌 | 否 | - |
| 售价 | 否 | 数字 |
| 成本价 | 否 | 数字 |
| 最低库存 | 否 | 整数 |
| 最高库存 | 否 | 整数 |
| 保质期(天) | 否 | 整数 |
| 状态 | 否 | 启用/禁用 |

---

## 九、打印管理模块

### 9.1 模块概述

打印管理模块提供可配置的标签和单据打印功能，支持模板设计、数据绑定、拖放布局、样式设置等功能，满足仓库作业中各类打印需求。

### 9.2 功能架构

```
┌─────────────────────────────────────────────────────────────────┐
│                        打印管理模块                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  模板设计   │  │  数据绑定   │  │  打印执行   │             │
│  ├─────────────┤  ├─────────────┤  ├─────────────┤             │
│  │ • 模板创建  │  │ • 数据源    │  │ • 打印预览  │             │
│  │ • 拖放布局  │  │ • 字段绑定  │  │ • 执行打印  │             │
│  │ • 元素编辑  │  │ • 格式化    │  │ • 批量打印  │             │
│  │ • 样式设置  │  │ • 条码规则  │  │ • 打印记录  │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
└─────────────────────────────────────────────────────────────────┘
```

### 9.3 模板设计器

#### 9.3.1 模板类型

| 类型 | 说明 | 典型尺寸 | 应用场景 |
|------|------|----------|----------|
| **标签模板** | 商品标签、库位标签 | 50×30mm, 70×50mm | 商品标识、货架标识 |
| **单据模板** | 入库单、出库单 | A4, A5 | 业务单据打印 |
| **条码模板** | 条码标签、二维码 | 40×20mm, 50×25mm | 条码打印 |

#### 9.3.2 模板属性

| 属性 | 类型 | 说明 |
|------|------|------|
| 模板编码 | string | 唯一标识 |
| 模板名称 | string | 显示名称 |
| 模板类型 | enum | label/document/barcode |
| 业务分类 | enum | product/inbound/outbound/stock/location |
| 模板尺寸 | number×number | 宽度×高度(mm) |
| 纸张方向 | enum | portrait/landscape |
| 页边距 | number[] | [上, 右, 下, 左] |
| 背景图片 | url | 可选背景图 |

#### 9.3.3 元素类型

| 元素 | 说明 | 可配置属性 |
|------|------|------------|
| **文本** | 静态/动态文本 | 字体、大小、颜色、对齐、边框 |
| **一维码** | CODE128/EAN13等 | 条码类型、高度、显示值、对齐 |
| **二维码** | QR Code/DataMatrix | 尺寸、纠错级别、边距 |
| **图片** | Logo/图片 | 图片URL、缩放、对齐 |
| **线条** | 分隔线 | 粗细、颜色、样式 |
| **矩形** | 边框/区域 | 边框、填充色、圆角 |
| **表格** | 数据表格 | 列定义、表头、边框 |

#### 9.3.4 样式配置

**文本样式**:
```json
{
  "fontFamily": "SimHei",
  "fontSize": 12,
  "fontWeight": "normal",
  "fontStyle": "normal",
  "color": "#000000",
  "textAlign": "left",
  "verticalAlign": "middle",
  "lineHeight": 1.5,
  "letterSpacing": 0,
  "textDecoration": "none",
  "borderWidth": 0,
  "borderColor": "#000000",
  "borderStyle": "solid",
  "borderRadius": 0,
  "backgroundColor": "transparent",
  "padding": [2, 4, 2, 4]
}
```

**一维码样式**:
```json
{
  "barcodeType": "CODE128",
  "displayValue": true,
  "textAlign": "center",
  "textPosition": "bottom",
  "textMargin": 2,
  "fontSize": 10,
  "font": "SimHei",
  "width": 2,
  "height": 50,
  "margin": 5,
  "background": "#ffffff",
  "lineColor": "#000000"
}
```

**二维码样式**:
```json
{
  "size": 80,
  "errorCorrectionLevel": "M",
  "margin": 2,
  "colorDark": "#000000",
  "colorLight": "#ffffff",
  "dotScale": 1
}
```

### 9.4 数据绑定

#### 9.4.1 数据源配置

| 业务分类 | 可用字段 |
|----------|----------|
| **商品(product)** | 商品编码、商品名称、条形码、规格、单位、品牌、产地、价格、成本价 |
| **入库(inbound)** | 入库单号、入库类型、供应商、仓库、商品信息、数量、批次号、生产日期、过期日期 |
| **出库(outbound)** | 出库单号、出库类型、客户、仓库、商品信息、数量、批次号 |
| **库存(stock)** | 商品信息、库位、批次号、数量、冻结数量、生产日期、过期日期 |
| **库位(location)** | 库位编码、库位名称、库区、仓库、类型、状态 |

#### 9.4.2 格式化规则

| 规则 | 说明 | 示例 |
|------|------|------|
| `date:YYYY-MM-DD` | 日期格式化 | 2024-01-01 |
| `date:YYYY-MM-DD HH:mm` | 日期时间格式化 | 2024-01-01 10:30 |
| `currency` | 货币格式化 | ¥100.00 |
| `number:2` | 数字保留小数 | 100.00 |
| `prefix:前缀` | 添加前缀 | 前缀内容 |
| `suffix:后缀` | 添加后缀 | 内容后缀 |

### 9.5 拖放设计器

#### 9.5.1 设计器界面

```
┌─────────────────────────────────────────────────────────────────┐
│ 工具栏: [保存] [预览] [撤销] [重做] [复制] [删除] [对齐]        │
├────────────┬───────────────────────────────────┬────────────────┤
│            │                                   │                │
│  元素面板  │          画布区域                 │   属性面板     │
│            │                                   │                │
│  ┌──────┐  │   ┌─────────────────────┐       │   ┌──────────┐ │
│  │ 文本 │  │   │                     │       │   │ 元素属性 │ │
│  ├──────┤  │   │   [商品名称]        │       │   ├──────────┤ │
│  │一维码│  │   │   ┌─────────────┐   │       │   │ 名称:    │ │
│  ├──────┤  │   │   │  |||||||||  │   │       │   │ 类型:    │ │
│  │二维码│  │   │   │  |||||||||  │   │       │   │ X:       │ │
│  ├──────┤  │   │   └─────────────┘   │       │   │ Y:       │ │
│  │ 图片 │  │   │                     │       │   │ 宽度:    │ │
│  ├──────┤  │   │   [规格] [单位]     │       │   │ 高度:    │ │
│  │ 线条 │  │   │                     │       │   ├──────────┤ │
│  ├──────┤  │   │   [价格: ¥99.00]    │       │   │ 样式设置 │ │
│  │ 矩形 │  │   │                     │       │   ├──────────┤ │
│  ├──────┤  │   └─────────────────────┘       │   │ 数据绑定 │ │
│  │ 表格 │  │                                   │   └──────────┘ │
│  └──────┘  │                                   │                │
│            │───────────────────────────────────│                │
│  尺寸: 50×30mm  单位: mm  缩放: 100%          │                │
└────────────┴───────────────────────────────────┴────────────────┘
```

#### 9.5.2 交互功能

| 功能 | 操作 | 说明 |
|------|------|------|
| 添加元素 | 拖放到画布 | 从元素面板拖放元素到画布 |
| 移动元素 | 拖拽移动 | 鼠标拖拽调整位置 |
| 调整大小 | 拖拽边角 | 拖拽元素边角调整尺寸 |
| 选中元素 | 点击 | 单击选中，显示属性面板 |
| 多选 | Ctrl+点击 | 选择多个元素 |
| 对齐 | 工具栏按钮 | 左对齐、右对齐、居中等 |
| 分布 | 工具栏按钮 | 水平分布、垂直分布 |
| 复制 | Ctrl+C/V | 复制粘贴元素 |
| 删除 | Delete | 删除选中元素 |
| 撤销/重做 | Ctrl+Z/Y | 操作历史管理 |

### 9.6 打印执行

#### 9.6.1 打印流程

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  选择模板   │ -> │  选择数据   │ -> │  打印预览   │
└─────────────┘    └─────────────┘    └─────────────┘
                                            │
                                            v
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  记录日志   │ <- │  执行打印   │ <- │  设置参数   │
└─────────────┘    └─────────────┘    └─────────────┘
```

#### 9.6.2 打印参数

| 参数 | 说明 |
|------|------|
| 打印份数 | 每条数据打印份数 |
| 打印机 | 选择目标打印机 |
| 纸张来源 | 自动/手动送纸 |
| 打印质量 | 草稿/标准/高质量 |

#### 9.6.3 打印场景

| 场景 | 触发位置 | 模板类型 |
|------|----------|----------|
| 商品标签打印 | 商品列表、入库确认 | 标签模板 |
| 入库单打印 | 入库单详情 | 单据模板 |
| 出库单打印 | 出库单详情 | 单据模板 |
| 库位标签打印 | 库位管理 | 标签模板 |
| 条码打印 | 条码生成 | 条码模板 |

### 9.7 条码规则

#### 9.7.1 规则配置

| 配置项 | 说明 | 示例 |
|--------|------|------|
| 条码类型 | CODE128/EAN13等 | CODE128 |
| 前缀 | 固定前缀 | P |
| 序号 | 自增序号 | 000001 |
| 补位长度 | 序号补零位数 | 6 |
| 后缀 | 固定后缀 | -A |

**生成示例**: `P000001-A`, `P000002-A`, `P000003-A`

#### 9.7.2 条码类型支持

| 类型 | 用途 | 长度限制 |
|------|------|----------|
| CODE128 | 通用条码 | 可变长度 |
| EAN-13 | 商品条码 | 13位 |
| EAN-8 | 小商品条码 | 8位 |
| CODE-39 | 工业条码 | 可变长度 |
| QR Code | 二维码 | 可变长度 |
| DataMatrix | 二维码 | 可变长度 |

### 9.8 页面设计

#### 9.8.1 模板列表页

**页面路径**: `/print/templates`

**功能列表**:
- 模板列表展示（卡片/列表视图切换）
- 按类型、分类筛选
- 模板搜索
- 新建模板
- 编辑模板
- 复制模板
- 删除模板
- 设为默认

#### 9.8.2 模板设计器页

**页面路径**: `/print/templates/:id/design`

**功能列表**:
- 元素面板（拖放元素）
- 画布区域（可视化设计）
- 属性面板（元素属性编辑）
- 数据源面板（字段绑定）
- 工具栏（保存、预览、撤销等）
- 模板设置面板（尺寸、边距等）

#### 9.8.3 打印预览弹窗

**触发方式**: 点击"打印预览"按钮

**功能列表**:
- 预览区域显示
- 数据选择（选择要打印的数据）
- 打印份数设置
- 打印机选择
- 执行打印按钮

### 9.9 技术实现

#### 9.9.1 前端技术栈

| 技术 | 用途 |
|------|------|
| Vue 3 | 框架 |
| Element Plus | UI组件 |
| Konva.js | 画布渲染 |
| JsBarcode | 一维码生成 |
| QRCode | 二维码生成 |
| html2canvas | 截图预览 |
| print.js | 打印执行 |

#### 9.9.2 后端技术栈

| 技术 | 用途 |
|------|------|
| Node.js | 运行环境 |
| Express | Web框架 |
| Prisma | ORM |
| PDFKit | PDF生成 |
| puppeteer | 服务端渲染 |

### 9.10 权限配置

| 权限编码 | 权限名称 | 说明 |
|----------|----------|------|
| print:template:view | 查看模板 | 查看模板列表和详情 |
| print:template:create | 创建模板 | 新建打印模板 |
| print:template:update | 编辑模板 | 修改模板设计 |
| print:template:delete | 删除模板 | 删除模板 |
| print:execute | 执行打印 | 执行打印操作 |
| print:record:view | 查看记录 | 查看打印历史 |
| barcode:rule:view | 查看规则 | 查看条码规则 |
| barcode:rule:manage | 管理规则 | 创建/编辑条码规则 |
| barcode:generate | 生成条码 | 生成条码 |

---

## 十、权限设计

### 10.1 权限点清单

| 模块 | 权限编码 | 权限名称 |
|------|----------|----------|
| **用户管理** | user:view | 查看用户 |
| | user:create | 创建用户 |
| | user:update | 编辑用户 |
| | user:delete | 删除用户 |
| **角色管理** | role:view | 查看角色 |
| | role:create | 创建角色 |
| | role:update | 编辑角色 |
| | role:delete | 删除角色 |
| | role:permission | 分配权限 |
| **商品管理** | product:view | 查看商品 |
| | product:create | 创建商品 |
| | product:update | 编辑商品 |
| | product:delete | 删除商品 |
| | product:import | 导入商品 |
| | product:export | 导出商品 |
| **仓库管理** | warehouse:view | 查看仓库 |
| | warehouse:create | 创建仓库 |
| | warehouse:update | 编辑仓库 |
| | warehouse:delete | 删除仓库 |
| **入库管理** | inbound:view | 查看入库单 |
| | inbound:create | 创建入库单 |
| | inbound:update | 编辑入库单 |
| | inbound:delete | 删除入库单 |
| | inbound:review | 审核入库单 |
| | inbound:complete | 确认入库 |
| **出库管理** | outbound:view | 查看出库单 |
| | outbound:create | 创建出库单 |
| | outbound:update | 编辑出库单 |
| | outbound:delete | 删除出库单 |
| | outbound:review | 审核出库单 |
| | outbound:complete | 确认出库 |
| **库存管理** | stock:view | 查看库存 |
| | stock:freeze | 冻结库存 |
| | stock:alert | 处理预警 |
| **盘点管理** | inventory:view | 查看盘点 |
| | inventory:create | 创建盘点 |
| | inventory:count | 盘点录入 |
| | inventory:handle | 处理差异 |
| **打印管理** | print:template:view | 查看模板 |
| | print:template:create | 创建模板 |
| | print:template:update | 编辑模板 |
| | print:template:delete | 删除模板 |
| | print:execute | 执行打印 |
| | print:record:view | 查看记录 |
| **条码管理** | barcode:rule:view | 查看规则 |
| | barcode:rule:manage | 管理规则 |
| | barcode:generate | 生成条码 |
| **报表查看** | report:view | 查看报表 |
